"use strict";function fhwMD(e){let t=[],l=[],r={};const i={defLi:new RegExp(/^ *: /g),footnote:new RegExp(/(?<footnote>^ *\[\^(?<bez>[\d\w ]+)\]: )/),fCode:new RegExp(/^ *```.*/),idReg:new RegExp(/{#(?<id>.+)}/),list:new RegExp(/^ *[-+*] |^ *\d+\. /),mail:new RegExp(/<[a-zA-Z0-9.!#$%&’*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*>/),ol:new RegExp(/^ *\d+. /),tag:new RegExp(/<(?<tag>.*?)>/),th:new RegExp(/^ *[\| ]*.*\|.*/),ul:new RegExp(/^ *[-\*\+] /),url:new RegExp(/<https?:\/\/(www\.)?[-a-zA-Z0-9@:%._\+~#=]{1,256}\.[a-zA-Z0-9()]{1,6}\b([-a-zA-Z0-9()!@:%_\+.~#?&\/\/=]*)>/),refLink:new RegExp(/^\[(?<num>.*)\]: *<*(?<link>.*)$/),refTitle:new RegExp(/<*(?<link>.*)[ >]*["'(](?<title>.*)["')] *$/)},n=(e,t)=>e.match(new RegExp("^"+t+"*"),t)[0].length;function o(e){return e.replaceAll(/[&<>'"]/g,(function(e){return{"&":"&amp;","<":"&lt;",">":"&gt;","'":"&#39;",'"':"&quot;"}[e]||e}))}function p(e){return/\S+@\S+\.\S+/.test(e)}function a(e){return!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(e)}const c=e=>{let t=e,l=0;return{g:e=>t[l+e]??!1,i:()=>l<t.length,n:()=>t[l++]??!1,c:()=>t[l]??!1,f:()=>l-=l>0,p:e=>{t.push(e),l=t.length-1},a:()=>t,change:e=>t[l]=e,length:()=>t.length,o:()=>t.pop()??!1,last:()=>t[t.length-1]??!1,after:e=>t.splice(l+1,0,e),e:()=>n(t[l]," "),reset:()=>{l=0},deleteAll:()=>{t=[]},hasData:()=>t.length>0,find:e=>t.includes(e),findIdx:e=>-1!==t.indexOf(e)&&t.indexOf(e),oo:e=>{let l="";for(let r=0;r<e;r++){let e=t.pop()??!1;l+=e||""}return l},b:()=>l,d:e=>{l=e}}},f=e=>{e=e.replaceAll(/\t/g,"    ");let l=c(e.split(/\r?\n|\r|\n/g)),o=c([]);o.h=(e=0)=>o.g(e).h??!1,o.v=(e=0)=>o.g(e).v??!1,o.e=(e=0)=>o.g(e).k??!1,o.l=(e=0)=>o.g(e).l??!1,o.N=e=>o.c().h=e,o.O=e=>o.c().l=e,o.P=e=>o.c().v=e,o.add=(e="",t="",l=0,r=0,i="",n="")=>o.p({h:e,v:t,k:l,l:r,hId:i,codeClass:n});let f=[];f.h=(e,t,l)=>{let r=n(t,"#");r>6&&(r=6),o.add(e,t.slice(l).trim().replace(i.idReg,""),l,r,t.match(i.idReg)?.groups.id.replaceAll(" ","-")??!1)},f.h1=(e,t,l)=>{if("p"==o.h())return t="# "+o.v(),o.o(),void o.add("h",t,l,1);o.add("p",t,l)},f.h2=(e,t,l)=>{if("p"==o.h())return t="# "+o.v(),o.o(),void o.add("h",t,l,2);o.add("hr",t,l)},f.hr=(e,t,l)=>{o.p({h:e,v:t,k:l})},f.table=(e,t,r)=>{let n=i.th.exec(o.v()),p=i.th.exec(l.g(1));if(n&&p)for(o.N("table"),o.p({h:e,v:t,k:r}),l.n();l.i();){if(!i.th.exec(l.c())){l.f();break}o.add(e,l.c(),r),l.n()}else o.add("p",t,r)},f.blockquote=(e,t,l)=>{let r=n(t,">");t=t.slice(l+r+1),o.p({h:e,v:t,k:l,l:r})},f.code=(e,t,l)=>{o.add(e,t.slice(4),l)},f.fcode=(e,t,r)=>{let n=l.e(),p=t.trimStart().slice(3).trim();for(l.n();l.i()&&!i.fCode.exec(l.c());){if(l.e()<n){l.f();break}t=l.c().slice(n),o.add("code",l.c().slice(n),l.e()-n,null,null,p),l.n()}},f.blank=(e,t,l)=>{o.h!=e&&o.p({h:e,v:t,k:l})},f.p=(e,t,l)=>{o.p({h:e,v:t,k:l})},f.list=(e,t,r)=>{let n=0,p=0;for(;l.i();){if(i.list.exec(l.c())&&(n=l.e()+2),0==l.e()&&!i.list.exec(l.c())&&""==l.c()){l.f();break}p=l.e()>n?n:l.e(),o.add(e,l.c().slice(p),l.e()),l.n()}"list"==o.h()&&""==o.v()&&o.N("blank")},f.html=(e,t,l)=>{let r=i.tag.exec(t)?.groups.tag;a(encodeURI(r))&&(e="p"),p(r)&&(e="p"),o.p({h:e,v:t,k:l})},f.deflist=(e,t,r)=>{let n="p"==o.h(),p=l.e(),a="";if(n)for(o.N("deflist"),o.O("dt");l.i();){for(;l.e()>p;)o.add(e,l.c(),r,"ddchild"),l.n();if(!l.c().match(/^ *: /g)){l.f();break}t=l.c().slice(r),a="dd",o.p({h:e,v:t,l:a,k:r}),l.n()}else for(;l.i();){if(!l.c().match(i.defLi)){l.f();break}o.add("p",l.c().slice(r),r),l.n()}},f.reflink=(e,l,r)=>{let n="",o="",p="",a=i.refLink.exec(l);a&&(n=a.groups.num,o=a.groups.link.trim());let c=i.refTitle.exec(a.groups.link);c&&(o=c.groups.link.trim(),p=c.groups.title.trim()),t[n.replaceAll(" ","-")]={linkUrl:o,linkTitel:p}},f.footnote=(e,t,n)=>{let p=t.match(i.footnote).groups.bez;r[p]=Object.keys(r).length+1,t=t.replace(i.footnote,"");let a="parent";o.p({h:e,v:t,k:n,l:a,footName:p});let c=!1;for(l.n();l.i()&&(c||(c=l.e()),""!=l.c())&&!l.c().match(i.footnote)&&l.e()>=c&&0!=l.e();)t=l.c().slice(c),a="child",n=l.e()-c,o.p({h:e,v:t,k:n,l:a,footName:p}),l.n();r[p],o.P(o.v()+`[&#9166;](#footnoteret-${p} "zurück")`),l.f()};const d=c([]);d.p("(?<h>^ *#+)"),d.p("(?<h1>^ *===+ *$)"),d.p("(?<h2>^ *---+ *$)"),d.p("(?<hr>^ *[_*]{3,} *$)"),d.p("(?<table>^ *[\\| ]*[ -:]+\\|.*)"),d.p("(?<fcode>^ *```.* *)"),d.p("(?<code>^ {4,})"),d.p("(?<list>^ *[-+*] |^ *\\d+\\. )"),d.p("(?<html>^ *<.*?>)"),d.p("(?<blockquote>^ *>+ *)"),d.p("(?<blank>^ *$)"),d.p("(?<deflist>^ *: )"),d.p("(?<footnote>^ *\\[\\^(?<bez>[\\d\\w ]+)\\]: )"),d.p("(?<reflink>^\\[.*\\]:)"),d.p("(?<p>^.*$)");const s=new RegExp(d.a().join("|")),h=e=>{let t=s.exec(e);return t?Object.keys(t.groups).find((e=>void 0!==t.groups[e])):"p"};for(;l.i();){let e=l.c(),t=h(e),r=l.e();f[t](t,e,r),l.n()}return o.reset(),o},d=e=>{const t=e=>d(f(e));let r=c([]),n=[];for(n.h=e=>{let t="";e.hId&&(t=` id="${e.hId.replaceAll(" ","-")}"`),r.p(`<h${e.l}${t}>${s(e.v.slice(e.l).trim())}</h${e.l}>`)},n.blank=()=>{},n.p=t=>{if("p"==e.h(-1)){r.o();let l=e.v(-1).replace(/  $/,"<br>")+" ";e.P(l+t.v)}r.p(`<p>${s(t.v)}</p>`)},n.hr=()=>r.p("<hr>"),n.code=t=>{let l="";for(t.codeClass&&(l=` class="language-${t.codeClass} ${t.codeClass}"`),r.p(`<pre><code${l}>${o(t.v)}`),e.n();e.i();){if("code"!==e.h()){e.f();break}r.p(o(e.v())),e.n()}r.p("</code></pre>")},n.list=()=>{let l=[],n=0,o=c([]),p=c([]),a="";if(i.ul.exec(e.v())&&(a="ul"),i.ol.exec(e.v())&&(a="ol"),r.p(`<${a}>`),p.p(`</${a}>`),o.p(e.e()),e.g(1)){for(l.push(e.v().replace(i.list,"")),e.n();e.i()&&"list"===e.h();){if(i.list.exec(e.v())&&(r.p("<li>"),1==l.length?r.p(s(l[0])):(l.length>1&&l[1]&&l[1].match(reg)&&(r.p(s(l[0])),l.shift()),r.p(t(l.join("\n")))),l=[],e.e()>o.last()&&(i.ul.exec(e.v())&&(a="ul"),i.ol.exec(e.v())&&(a="ol"),r.p(`<${a}>`),p.p(`</${a}>`),o.p(e.e())),e.e()<o.last())){if(o.find(e.e()))n=o.length()-o.findIdx(e.e())-1;else{let t=0;for(;o.g(t)>e.e();)t--;n=-1*t-1}for(let e=0;e<n;e++)o.o(),r.p(p.o())}l.push(e.v().replace(i.list,"")),e.n()}for(r.p("<li>"),1==l.length?r.p(s(l[0])):(l.length>1&&l[1]&&l[1].match(i.list)&&(r.p(s(l[0])),l.shift()),r.p(t(l.join("\n"))));p.last();)r.p(p.o());e.f()}else r.p("<li>"+s(e.v().replace(reg,""))+p.o())},n.table=()=>{let t=(()=>{let t=e.v(1).replace(/^ *\||\| *$/g,"").split("|");return t.forEach(((e,l)=>{let r=e.trim();t[l]="",r.match(/^:.*:$/)&&(t[l]=' style="text-align: center;"'),r.match(/^:-*$/)&&(t[l]=' style="text-align: left;"'),r.match(/^-*:$/)&&(t[l]=' style="text-align: right;"')})),t})(),l=e.v().replace(/^ *\||\| *$/g,"").split("|");e.n(),e.n();let i=[];for(;e.i();){if("table"!==e.h()){e.f();break}i.push(e.v().replace(/^ *\||\| *$/g,"").split("|")),e.n()}let n=l.length;i.forEach((e=>{e.length>n&&(n=e.length)})),r.p("<table>"),r.p("<thead><tr>");for(let e=0;e<n;e++){let i=l[e]??"",n=t[e]??"";r.p(`<th${n}>`),r.p(s(i.trim())),r.p("</th>")}r.p("</tr></thead>"),r.p("<tbody>"),i.forEach((e=>{r.p("<tr>");for(let l=0;l<n;l++){let i=e[l]??"",n=t[l]??"";r.p(`<td${n}>`),r.p(s(i.trim())),r.p("</td>")}r.p("</tr>")})),r.p("</tbody>"),r.p("</table>")},n.blockquote=()=>{let l="",i=c([]);r.p("<blockquote>"),i.p("</blockquote>");let n=e.l();for(;e.i();){if("blockquote"!==e.h()){e.f();break}if(n!==e.l()){r.p(t(l));let o=e.l()-n;if(o>0)for(let e=0;e<o;e++)r.p("<blockquote>"),i.p("</blockquote>");else r.p(i.oo(o*=-1));n=e.l(),l=""}l+=e.v()+"\n",e.n()}for(r.p(t(l));i.last();)r.p(`${i.o()}`)},n.html=()=>{r.p(e.v())},n.deflist=()=>{for(r.p("<dl>");e.i();){if("blank"==e.h()&&"deflist"!==e.h(1)){e.f();break}if("deflist"!==e.h()&&"blank"!==e.h()){e.f();break}if("blank"!==e.h()&&("dt"==e.l()&&r.p("<dt>"+s(e.v().replace(/^ *: /,""))+"</dt>"),"dd"==e.l()))if("ddchild"==e.l(1)){let l=[];for(l.push(e.v().replace(/^ *: /,"")),e.n();e.i();){if("ddchild"!==e.l()){r.p("<dd>"),r.p(t(l.join("\n"))),r.p("</dd>"),e.f();break}l.push(e.v()),e.n()}}else r.p("<dd>"+s(e.v().replace(/^ *: /,""))+"</dd>");e.n()}r.p("</dl>")},n.footnote=()=>{let r=[],i=e.c().footName;for(r.push(e.v()),e.n();e.i()&&"child"===e.c().l;)r.push(e.v()),e.n();i=i.replaceAll(" ","-"),l.push(`<li id="footnote-${i}">`+t(r.join("\n"))),e.f()};e.i();)n[e.h()](e.c()),e.n();return r.a().join("\n")},s=e=>{let l=c(e.split("")),i=e,n=c([]),f=c([]),d=c([]);function h(e){return" "==l.g(-1)&&" "==l.g(e)&&(n.p(l.c()),2==e&&(n.p(l.g(1)),l.n()),!0)}function g(e){if(n.last()==`<${e}>`)return n.o(),void f.o();f.find(e)?function(e){for(;d.last()!==e;)n.p(`</${f.last()}>`),d.p(f.o());for(d.o();d.last();)n.p(`<${d.last()}>`),f.p(d.o())}(e):(n.p(`<${e}>`),f.p(e))}function u(){let e=i.substr(l.b());n.p("<code>"),f.p("code");let t=/^(?<!`)`(?!`)(?<code>.*?)(?<!`)`(?!`)/.exec(e);if(t)return n.p(o(t.groups.code)),l.d(l.b()+t[0].length-1),void n.p(`</${f.o()}>`)}function k(){n.p("<code>"),f.p("code"),l.f();let e=i.substr(l.b()),t=/^(?<!`)``(?!`)(?<code>.*?)(?<!`)``(?!`)/.exec(e);if(t)return n.p(o(t.groups.code)),l.d(l.b()+t[0].length-1),void n.p(`</${f.o()}>`)}function b(){let e=i.substr(l.b()),o=e.match(/\[\^(?<flink>[\d\w ]+)\]/);if(o){let e=o[0].length,t=o.groups.flink,l=r[t]??"error";return t=t.replaceAll(" ","-"),[`<sup id=footnoteret-${t}><a href="#footnote-${t}">${l}</a></sup>`,e]}let p=e.match(/^\[!\[(?<imgAlt>.+?)\]\((?<imgUrl>[^ ]+?)( "(?<imgTitle>.+?)")?\)\]\((?<linkUrl>.+?)\)/);if(p){let e=p.groups.imgTitle;e=e?` title="${e}"`:"";let t=p.groups.imgAlt;return t=t?` alt="${t}"`:"",[`<a href="${p.groups.linkUrl}"><img src="${p.groups.imgUrl}" ${t}${e}></a>`,p[0].length]}let a=e.match(/^\[(?<linktext>.+?)\]\((?<linkUrl>[^ ]+?)( ["'\(](?<title>.+?)["'\)])?\)/);if(a){let e=a.groups.title;return e=e?` title="${e}"`:"",[`<a href="${encodeURI(a.groups.linkUrl.trim())}"${e}>${s(a.groups.linktext)}</a>`,a[0].length]}let c=e.match(/^\[(?<linktext>.+?)\]\((?<linkUrl>#.+?)( ["'\(](?<title>.+?)["'\)])?\)/);if(c){let e=c.groups.title;return e=e?` title="${e}"`:"",[`<a href="${encodeURI(c.groups.linkUrl.trim().replaceAll(" ","-"))}"${e}>${s(c.groups.linktext)}</a>`,c[0].length]}let f=e.match(/\[(?<label>.+?)\] ?\[(?<linkRef>.+?)\]/);if(f){let e=f.groups.linkRef.replaceAll(" ","-").toLowerCase();if(t[e]){let l=t[e].linkUrl,r=t[e].linkTitel;return r=""!==r?` title="${r}"`:"",[`<a href="${encodeURI(l.trim())}"${r}>${s(f.groups.label)}</a>`,f[0].length]}}let d=e.match(/^\[(?<label>.+?)\](?!\[)/);if(d){let e=d.groups.label.replaceAll(" ","-").toLowerCase();if(t[e]){let l=t[e].linkUrl,r=t[e].linkTitel;return r=""!==r?` title="${r}"`:"",[`<a href="${encodeURI(l.trim())}"${r}>${s(d.groups.label)}</a>`,d[0].length]}}return n.p(l.c()),[!1,""]}function $(){let e=i.substr(l.b()).match(/^!\[(?<imgAlt>.+?)\]\((?<imgUrl>[^ ]+?)( "(?<imgTitle>.+?)")?\)/);if(e){let t=e.groups.imgTitle;return t=t?` title="${t}"`:"",[`<img src="${encodeURI(e.groups.imgUrl.trim())}" alt="${e.groups.imgAlt}"${t}>`,e[0].length]}return n.p(l.c()),[!1,""]}function m(){let e="",t=1;return[e,t]=function(e,t){let r="";for(;l.g(e)&&l.g(e)!=t;)r+=l.g(e),e++;return[r,e]}(t,">"),l.g(t)&&""!=e?p(encodeURI(e))?(n.p(`<a href="mailto:${e}">${e}</a>`),void l.d(l.b()+t)):a(encodeURI(e))?(n.p(`<a href="${e}">${e}</a>`),void l.d(l.b()+t)):void n.p(l.c()):(n.p(o(l.c())),[!1,""])}function v(){i.substr(l.b());let e=0,t="";for(;l.g(e)&&!" <".includes(l.g(e));)t+=l.g(e),e++;e=-1;let r="";for(;l.g(e)&&!" >".includes(l.g(e));)r=l.g(e)+r,e--;let o=encodeURI(r+t);return a(o)?(l.d(l.b()+t.length-1),n.oo(r.length),void n.p(`<a href="${o}">${r+t}</a>`)):p(o)?(l.d(l.b()+t.length-1),n.oo(r.length),void n.p(`<a href="mailto: ${o}">${r+t}</a>`)):void n.p(l.c())}for(!function(){for(;l.i();){let e=l.c();if("*_^=\\`[!<~:@".includes(e))switch(e){case"*":case"_":if(h(1))break;if("*"==l.g(1)||"_"==l.g(1)){if(h(2))break;l.n(),g("strong")}else g("em");break;case"^":if(h(1))break;g("sup");break;case"~":if(h(1))break;if("~"==l.g(1)){if(h(2))break;l.n(),g("del")}else g("sub");break;case"=":if(h(1))break;if("="==l.g(1)){if(h(2))break;l.n(),g("mark")}else n.p(l.c());break;case"\\":l.i()?(l.n(),"$"==l.c()?n.p("&dollar;"):n.p(o(l.c()))):n.p(l.c());break;case"`":"`"==l.g(1)?(l.n(),k()):u();break;case"[":if(h(1))break;let[e,t]=b();e&&(n.p(e),l.d(l.b()+t-1));break;case"!":if(h(1))break;let[r,i]=$();r&&(n.p(r),l.d(l.b()+i-1));break;case"<":if(h(1))break;m();break;case":":case"@":v()}else n.p(l.c());l.n()}}();f.last();)n.p(`</${f.o()}>`);return n.a().join("")};let h=f(e),g=d(h);return l.length>0?g+"<hr><ol>"+l.join("\n")+"</ol>":g}